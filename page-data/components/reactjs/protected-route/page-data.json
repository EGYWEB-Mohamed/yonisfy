{"componentChunkName":"component---src-templates-docs-js","path":"/components/reactjs/protected-route","result":{"data":{"site":{"siteMetadata":{"title":"Yonisfy","docsLocation":"https://github.com/mohammedelzanaty/yonisfy","docsLocationType":"github","editable":true}},"mdx":{"fields":{"id":"e65c3583-a544-5b88-85b8-2c571a95571b","title":"Protected Route","slug":"/components/reactjs/protected-route"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Protected Route\",\n  \"showMetadata\": true,\n  \"editable\": true,\n  \"showToc\": true,\n  \"order\": 5\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"iframe\", {\n    width: \"100%\",\n    height: \"600\",\n    src: \"https://www.youtube.com/embed/BmBupjGJcaU\",\n    title: \"YouTube video player\",\n    frameBorder: \"0\",\n    allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n    allowFullScreen: true\n  }), mdx(\"section\", null, mdx(\"h2\", {\n    parentName: \"section\"\n  }, \"Protected routes and authentication with React\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"One of the project I build these days, I find my self need to protect certain routes in my application from users who don't have access to and need a proper authentication. though react router doesn't provide a specific functionality for this, because it was build with composability in mind, adding it is fairly straight forward.\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"Before we even go about creating our protected routes, we\\u2019ll need a way to figure out if the user is authenticated. so we need to give access to the user which has only access to.\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"so there's a starter code for this tutorial feel free to download, clone it into your local machine and you will find link in the description below.\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"Now the idea is that anyone will be able to access /public (and therefore see the Public component), but eventually, anyone who tries to access /protected who isn\\u2019t authenticated, will get redirected to /login.\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"So naturally, the next step is to render a Route with a path of /protected. The problem is that by rendering a normal Route, anyone will be able to access it, which obviously isn\\u2019t what we want.\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"It would be nice if, just like React Router v4 gives us a Route component, they also gave us a PrivateRoute component which would render the component only if the user was authenticated.\"), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"<Route path=\\\"/public\\\" component={Public} />\\n<Route path=\\\"/login\\\" component={Login} />\\n<PrivateRoute path='/protected' component={Protected} />\\n\")), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"Unfortunately, they don\\u2019t. However, the good news is that Route is composable. That means wee can create our PrivateRoute implementation which handles our own specific use cases.\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"Here are the requirements for our PrivateRoute component.\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"It has the same API as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<Route />\"), \".\\nIt renders a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<Route />\"), \" and passes all the props through to it.\\nIt checks if the user is authenticated. If they are, it renders the \\u201Ccomponent\\u201D prop. If not, it redirects the user to /login.\\nWith those requirements in mind, let\\u2019s build it out.\"), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"// Requirement 1.\\n// It has the same API as <Route />\\n\\nconst PrivateRoute = ({ component: Component, ...rest }) => (\\n\\n)\\n// Requirement 2.\\n// It renders a <Route /> and passes all the props through to it.\\n\\nconst PrivateRoute = ({ component: Component, ...rest }) => (\\n  <Route {...rest} render={} />\\n)\\n\\n// Requirement 3.\\n// It checks if the user is authenticated, if they are,\\n// it renders the \\\"component\\\" prop. If not, it redirects\\n// the user to /login.\\n\\nconst PrivateRoute = ({ component: Component, ...rest }) => (\\n  <Route {...rest} render={(props) => (\\n    isAuthenticated === true\\n      ? <Component {...props} />\\n      : <Redirect to='/login' />\\n  )} />\\n)\\n\")), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"At this point, everything works great. When a user who isn\\u2019t authenticated tries to go to /protected, they\\u2019re redirected to /login. Then once they\\u2019re authenticated, they can access /protected.\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"There is one more addition we can make to make the UX a little better. You\\u2019ve probably experienced this very common UX fail before. You try to access a specific page, it redirects you to the login page, you authenticate, then, instead of taking you back to the initial page you were trying to access, it takes you to a completely unrelated page. Instead of being taken to an unrelated page, you should have been taken back to the initial page you were trying to access before you were redirected. At this point in our code, we\\u2019re also committing that UX fail. Let\\u2019s fix it.\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"First, inside of our PrivateRoute component, when we redirect the user for not being authenticated, we\\u2019ll need to pass along the current route they\\u2019re trying to visit so we can come back to it after they authenticate. We can do this by changing the Redirect\\u2019s to prop from a string to an object and pass along a state key whose value is the current location of the route the user is trying to access.\"), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"<Redirect to={{\\n  pathname: '/login',\\n  state: { from: props.location }\\n}} />\\n\"))));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#protected-routes-and-authentication-with-react","title":"Protected routes and authentication with React"}]},"timeToRead":2,"parent":{"__typename":"File","relativePath":"components/reactjs/protected-route.md","fields":{"gitLogLatestAuthorName":"mohammedelzanaty","gitLogLatestAuthorEmail":"mohammedelzanaty129@gmail.com","gitLogLatestDate":"8 hours ago"}},"frontmatter":{"metaTitle":null,"showMetadata":true,"editable":true,"showPreviousNext":null,"showToc":true}},"gitBranch":{"name":"main"},"gitCommit":{"hash":"b4d4e0d291c7cd0780f1095f8bf35e3d1304104a","date":"2021-08-30 10:05"}},"pageContext":{"id":"e65c3583-a544-5b88-85b8-2c571a95571b"}},"staticQueryHashes":["12478684","12478684","2882937274","2882937274","353167761","353167761","4106624947","4106624947"]}